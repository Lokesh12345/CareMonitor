<div class="dashboard-container">
  <mat-toolbar color="primary">
    <span>CareMonitor Dashboard</span>
    <span class="toolbar-spacer"></span>
    <span class="user-email" *ngIf="userEmail$ | async as email">{{ email }}</span>
    <button mat-icon-button (click)="refreshSession()" aria-label="Refresh session" title="Refresh Session">
      <mat-icon>refresh</mat-icon>
    </button>
    <button mat-icon-button (click)="logout()" aria-label="Logout" title="Logout">
      <mat-icon>logout</mat-icon>
    </button>
  </mat-toolbar>

  <div class="container">
    <!-- Welcome Section -->
    <div class="welcome-section">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Welcome to CareMonitor</mat-card-title>
          <mat-card-subtitle *ngIf="userEmail$ | async as email">
            Logged in as: {{ email }}
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p>Monitor and manage your care data with real-time insights and analytics.</p>
          <div class="auth-status" *ngIf="isAuthenticated$ | async">
            <mat-icon class="status-icon">check_circle</mat-icon>
            <span>System Status: Online</span>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Stats Overview -->
    <div class="stats-section">
      <div class="stats-grid">
        <mat-card class="stat-card patients">
          <mat-card-content>
            <div class="stat-content">
              <div class="stat-info">
                <div class="stat-number">{{ dashboardStats.totalPatients }}</div>
                <div class="stat-label">Total Patients</div>
                <div class="stat-change positive">+{{ dashboardStats.newPatientsThisWeek }} this week</div>
              </div>
              <mat-icon class="stat-icon">people</mat-icon>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="stat-card equipment">
          <mat-card-content>
            <div class="stat-content">
              <div class="stat-info">
                <div class="stat-number">{{ dashboardStats.totalEquipment }}</div>
                <div class="stat-label">Equipment Items</div>
                <div class="stat-change neutral">{{ dashboardStats.equipmentActive }} active</div>
              </div>
              <mat-icon class="stat-icon">medical_services</mat-icon>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="stat-card appointments">
          <mat-card-content>
            <div class="stat-content">
              <div class="stat-info">
                <div class="stat-number">{{ dashboardStats.appointmentsToday }}</div>
                <div class="stat-label">Today's Appointments</div>
                <div class="stat-change neutral">{{ dashboardStats.appointmentsWeek }} this week</div>
              </div>
              <mat-icon class="stat-icon">event</mat-icon>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="stat-card alerts">
          <mat-card-content>
            <div class="stat-content">
              <div class="stat-info">
                <div class="stat-number">{{ dashboardStats.pendingAlerts }}</div>
                <div class="stat-label">Pending Alerts</div>
                <div class="stat-change" [class.warning]="dashboardStats.pendingAlerts > 0">
                  {{ dashboardStats.urgentAlerts }} urgent
                </div>
              </div>
              <mat-icon class="stat-icon">notification_important</mat-icon>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="activity-section">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Recent Activity</mat-card-title>
          <mat-card-subtitle>Latest updates from your care monitoring system</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="activity-list">
            <div *ngFor="let activity of recentActivities" class="activity-item">
              <mat-icon [class]="'activity-icon ' + activity.type">{{ activity.icon }}</mat-icon>
              <div class="activity-details">
                <div class="activity-title">{{ activity.title }}</div>
                <div class="activity-time">{{ activity.time }}</div>
              </div>
            </div>
          </div>
        </mat-card-content>
        <mat-card-actions align="end">
          <button mat-button (click)="navigateToList()">View All Items</button>
        </mat-card-actions>
      </mat-card>
    </div>

    <!-- Quick Actions -->
    <div class="navigation-section">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Quick Actions</mat-card-title>
          <mat-card-subtitle>Access frequently used features</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="nav-buttons">
            <button
              mat-raised-button
              color="primary"
              (click)="navigateToList()"
              class="nav-button">
              <mat-icon>list</mat-icon>
              View All Items
            </button>

            <button
              mat-stroked-button
              color="primary"
              (click)="addNewRecord()"
              class="nav-button">
              <mat-icon>add</mat-icon>
              Add New Record
            </button>

            <button
              mat-stroked-button
              color="accent"
              (click)="generateReport()"
              class="nav-button">
              <mat-icon>assessment</mat-icon>
              Generate Report
            </button>

            <button
              mat-stroked-button
              color="primary"
              (click)="refreshSession()"
              class="nav-button">
              <mat-icon>refresh</mat-icon>
              Refresh Data
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>